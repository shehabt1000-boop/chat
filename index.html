<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ø´Ø§Øª Ø´Ù‡Ø§Ø¨</title>
  <style>
    /* Ø£Ø³Ø§Ø³ÙŠØ§Øª */
    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      font-family: "Cairo", Arial, sans-serif;
      background: #f5f5f5;
      display: flex;
      justify-content: center;
      align-items: stretch;
    }




    .chat-container {
      width: 100%;
      max-width: 420px;
      height: 100dvh;
      background: #fff;
      border: 1px solid #ddd;
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }




    /* Ø§Ù„Ù‡ÙŠØ¯Ø± */
    .chat-header {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 10px;
      background: linear-gradient(90deg,#000,#0a3d62);
      color: #fff;
    }
    .chat-header .avatar {
      width: 44px; height: 44px;
      border-radius: 50%;
      border: 2px solid #fff;
    }
    .chat-header .title { margin: 0; font-size: 20px; font-weight: 800; }
    .logout-btn {
      margin-right: auto;
      padding: 8px 12px;
      background: linear-gradient(90deg, #c0392b, #e74c3c);
      color: #fff;
      border: none;
      border-radius: 20px;
      cursor: pointer;
      box-shadow: 0 2px 6px rgba(0,0,0,0.25);
      font-size: 14px;
      white-space: nowrap;
    }




    /* Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ†Ù‚Ù„ */
    .chat-nav {
      display: flex;
      background: linear-gradient(90deg,#0a3d62,#000);
    }
    .nav-btn {
      flex: 1;
      padding: 12px 6px;
      background: transparent;
      border: none;
      color: #fff;
      font-size: 14px;
      cursor: pointer;
    }
    .nav-btn.active,
    .nav-btn:hover { background: rgba(255,255,255,0.08); }




    /* Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ */
    .chat-content {
      flex: 1;
      display: flex;
      flex-direction: column;
      min-height: 0;
      background: #fafafa;
    }




    /* ØµÙØ­Ø© Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© */
    .chat-page {
      flex: 1;
      display: flex;
      flex-direction: column;
      min-height: 0;
    }




    .messages {
      flex: 1;
      padding: 12px;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
      gap: 8px;
    }




    /* ÙÙ‚Ø§Ø¹Ø§Øª Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ */
    .bubble {
      max-width: 75%;
      padding: 8px 12px;
      border-radius: 16px;
      line-height: 1.5;
      word-wrap: break-word;
      width: fit-content;
    }
    .bubble.sent { align-self: flex-end; background: #dcf8c6; }
    .bubble.recv { align-self: flex-start; background: #fff; }




    /* Ø´Ø±ÙŠØ· Ø§Ù„ÙƒØªØ§Ø¨Ø© */
    .chat-input {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 8px;
      background: linear-gradient(90deg,#000,#0a3d62);
      border-top: 1px solid rgba(255,255,255,0.08);
      direction: ltr;
    }




    .left-tools {
      display: flex;
      gap: 6px;
    }




    .icon-btn {
      width: 38px; height: 38px;
      border: none; border-radius: 10px;
      background: rgba(255,255,255,0.15);
      color: #fff; font-size: 18px;
      cursor: pointer;
    }




    .msg-input {
      flex: 1;
      padding: 10px 12px;
      border-radius: 22px;
      border: 1px solid #ccc;
      outline: none;
      background: #fff;
      font-size: 14px;
      direction: rtl;
    }




    /* Ø²Ø± Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ */
    .send-btn {
      width: 42px; height: 42px;
      border: none; border-radius: 50%;
      background: #25d366;
      color: #fff; font-size: 18px;
      cursor: pointer;
      display: flex; align-items: center; justify-content: center;
      box-shadow: 0 2px 6px rgba(0,0,0,0.25);
    }


    /* ---------------------------------------------------------------------------------- */
    /* Ø£Ù†Ù…Ø§Ø· ØµÙØ­Ø© Ø§Ù„Ø£Ø¹Ø¶Ø§Ø¡ */
    /* ---------------------------------------------------------------------------------- */


    .members-page {
      flex: 1;
      display: flex;
      flex-direction: column;
      padding: 12px;
      gap: 12px;
      overflow-y: auto;
    }


    .search-bar {
      display: flex;
      align-items: center;
      gap: 8px;
      background: #fff;
      padding: 8px 12px;
      border-radius: 24px;
      border: 1px solid #ddd;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
      direction: rtl;
    }


    .search-bar input {
      flex: 1;
      border: none;
      outline: none;
      background: transparent;
      font-size: 14px;
      direction: rtl;
    }


    .search-bar button {
      background: transparent;
      border: none;
      font-size: 18px;
      color: #888;
      cursor: pointer;
    }


    .members-list {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }


    .member-item-wrapper {
      padding: 2px;
      background-image: linear-gradient(to right, #000, #0a3d62);
      border-radius: 16px;
    }
    .member-item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 12px;
      background: #fff;
      border-radius: 14px;
    }
    .member-avatar {
      width: 50px; height: 50px;
      border-radius: 50%;
      object-fit: cover;
    }
    .member-info {
      flex: 1;
      display: flex;
      flex-direction: column;
    }
    .member-name {
      margin: 0;
      font-size: 16px;
      font-weight: 600;
      color: #333;
    }
    .member-id {
      margin: 0;
      font-size: 12px;
      color: #888;
      direction: ltr;
    }
    .member-status {
      width: 12px; height: 12px;
      border-radius: 50%;
    }
    .status-online { background-color: #25d366; }
    .status-offline { background-color: #ccc; }


    /* ---------------------------------------------------------------------------------- */
    /* Ø£Ù†Ù…Ø§Ø· ØµÙØ­Ø© Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª */
    /* ---------------------------------------------------------------------------------- */
    .settings-page {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 16px;
      padding: 16px;
      overflow-y: auto;
    }


    .settings-section {
      display: flex;
      flex-direction: column;
      gap: 8px;
      background: #fff;
      padding: 16px;
      border-radius: 16px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    .settings-section-title {
      margin: 0 0 8px 0;
      font-size: 18px;
      font-weight: 700;
      color: #0a3d62;
      border-bottom: 2px solid #ddd;
      padding-bottom: 4px;
    }
    .settings-option {
      display: flex;
      flex-wrap: wrap; /* ÙŠØ³Ù…Ø­ Ù„Ù„Ø¹Ù†Ø§ØµØ± Ø¨Ø§Ù„Ù†Ø²ÙˆÙ„ Ù„Ø³Ø·Ø± Ø¬Ø¯ÙŠØ¯ Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„ØµØºÙŠØ±Ø© */
      align-items: center;
      gap: 12px;
      padding: 8px 0;
      border-bottom: 1px solid #eee;
    }
    .settings-option:last-child { border-bottom: none; }
    .settings-option .label {
      flex: 1;
      font-size: 15px;
      color: #555;
    }
    .settings-btn, .settings-btn-themed {
      padding: 8px 16px;
      border-radius: 20px;
      cursor: pointer;
      font-size: 14px;
      white-space: nowrap;
      color: #fff;
      border: none;
    }
    .settings-btn-themed {
      background: linear-gradient(90deg, #0a3d62, #000);
      box-shadow: 0 2px 6px rgba(0,0,0,0.25);
    }


    /* Ù†Ø·Ø§Ù‚ Ø§Ù„ØªÙ†Ø³ÙŠÙ‚ */
    .settings-input, .settings-input-url {
      height: 40px;
      padding: 8px;
      border: 1px solid #ddd;
      border-radius: 8px;
      font-size: 14px;
    }
    .settings-input { width: 40px; }
    .settings-input-url { flex: 1; }
    .settings-range-container {
      display: flex;
      align-items: center;
      gap: 8px;
      flex-wrap: wrap;
    }
    .settings-range {
      flex: 1;
      -webkit-appearance: none;
      height: 6px;
      background: #ddd;
      border-radius: 3px;
      outline: none;
    }
    .settings-range::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 18px;
      height: 18px;
      border-radius: 50%;
      background: #0a3d62;
      cursor: pointer;
      box-shadow: 0 1px 3px rgba(0,0,0,0.2);
    }
    .settings-range-value {
      font-size: 14px;
      color: #0a3d62;
      font-weight: bold;
      width: 30px;
      text-align: right;
    }


    /* ---------------------------------------------------------------------------------- */
    /* Ø£Ù†Ù…Ø§Ø· ØµÙØ­Ø© Ø§Ù„Ø¨Ø±ÙˆÙØ§ÙŠÙ„ */
    /* ---------------------------------------------------------------------------------- */
    .profile-page {
      flex: 1;
      display: flex;
      flex-direction: column;
      padding: 16px;
      gap: 16px;
      overflow-y: auto;
    }


    .profile-section {
      display: flex;
      flex-direction: column;
      gap: 8px;
      background: #fff;
      padding: 16px;
      border-radius: 16px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
      align-items: center;
    }
    .profile-avatar-container { position: relative; }
    .profile-avatar {
      width: 90px; height: 90px;
      border-radius: 50%;
      border: 4px solid #0a3d62;
      object-fit: cover;
    }
    .profile-status {
      position: absolute;
      bottom: 6px; right: 6px;
      width: 20px; height: 20px;
      border-radius: 50%;
      border: 3px solid #fff;
    }
    .profile-name {
      font-size: 24px;
      font-weight: 700;
      color: #0a3d62;
      margin: 8px 0 0 0;
    }
    .profile-status-text {
      font-size: 14px;
      color: #888;
      margin: 0;
    }
    .profile-edit-btn {
      margin-top: 8px;
      background: #0a3d62;
      color: #fff;
      border: none;
      padding: 8px 16px;
      border-radius: 20px;
      cursor: pointer;
    }
    .profile-details-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
      width: 100%;
    }
    .profile-detail-card {
      background: #fafafa;
      padding: 12px;
      border-radius: 10px;
      border: 1px solid #ddd;
      text-align: center;
    }
    .profile-detail-card .label {
      font-size: 12px;
      color: #555;
    }
    .profile-detail-card .value {
      font-size: 16px;
      font-weight: bold;
      color: #0a3d62;
    }
    /* ---------------------------------------------------------------------------------- */
    /* Ø£Ù†Ù…Ø§Ø· ØµÙØ­Ø§Øª Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø© (ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ØŒ Ø§Ù„ØªØ³Ø¬ÙŠÙ„) */
    /* ---------------------------------------------------------------------------------- */
    .auth-page {
      flex: 1;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      padding: 20px;
      background: #f0f0f0;
      gap: 20px;
      direction: rtl;
      text-align: right;
    }
    .auth-title {
      font-size: 24px;
      font-weight: bold;
      color: #0a3d62;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
    }
    .auth-card {
      background: #fff;
      width: 100%;
      max-width: 340px;
      padding: 24px;
      border-radius: 16px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      display: flex;
      flex-direction: column;
      gap: 16px;
    }


    .auth-input-group {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }


    .auth-input {
      width: 100%;
      padding: 12px;
      border-radius: 12px;
      border: 1px solid #ccc;
      font-size: 14px;
      direction: rtl;
    }


    .form-btn-group {
      display: flex;
      gap: 10px;
      margin-top: 10px;
    }


    .form-btn-confirm {
      flex: 1;
      padding: 10px;
      border: none;
      border-radius: 12px;
      color: #fff;
      background: linear-gradient(90deg, #0a3d62, #000);
      cursor: pointer;
    }


    .form-btn-cancel {
      flex: 1;
      padding: 10px;
      border: none;
      border-radius: 12px;
      color: #0a3d62;
      background: #eee;
      cursor: pointer;
    }


    .form-text {
      font-size: 13px;
      color: #555;
      text-align: center;
      margin-top: -8px;
    }


    .form-text-link {
      color: #0a3d62;
      font-weight: bold;
      cursor: pointer;
      text-decoration: underline;
    }


    .profile-avatar-upload {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 10px;
      margin-top: 10px;
    }


    .signup-avatar-container {
      position: relative;
    }


    .signup-avatar {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      object-fit: cover;
      border: 2px solid #0a3d62;
    }


    .signup-avatar-actions {
      display: flex;
      gap: 8px;
      margin-top: 8px;
    }


    .signup-avatar-btn {
      background: #eee;
      border: 1px solid #ccc;
      border-radius: 8px;
      padding: 6px 10px;
      font-size: 12px;
      cursor: pointer;
    }


    .gender-select {
      display: flex;
      gap: 10px;
      margin-top: 10px;
      justify-content: center;
    }


    .gender-option {
      flex: 1;
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 10px;
      text-align: center;
      cursor: pointer;
      transition: background 0.3s;
    }


    .gender-option.selected {
      background: #0a3d62;
      color: #fff;
      border-color: #0a3d62;
    }


    /* Ø´Ø§Ø´Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„ */
    #loadingScreen {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.5);
      display: none;
      justify-content: center;
      align-items: center;
      color: #fff;
      z-index: 1000;
      font-size: 24px;
      font-weight: bold;
    }


    .loading-spinner {
      border: 4px solid rgba(255,255,255,0.3);
      border-top: 4px solid #fff;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      animation: spin 1s linear infinite;
    }
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
  </style>
</head>
<body>
  <div class="chat-container">
    <!-- Ø§Ù„Ù‡ÙŠØ¯Ø± -->
    <header class="chat-header" id="chatHeader" style="display: none;">
      <img src="https://images.pexels.com/photos/2055230/pexels-photo-2055230.jpeg" class="avatar" alt="avatar" />
      <h1 class="title">Ø´Ø§Øª Ø´Ù‡Ø§Ø¨</h1>
      <button class="logout-btn" onclick="openPage('logout', this)">ğŸšª ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</button>
    </header>


    <!-- Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ†Ù‚Ù„ ØªØ­Øª Ø§Ù„Ù‡ÙŠØ¯Ø± -->
    <nav class="chat-nav" id="chatNav" style="display: none;">
      <button class="nav-btn" onclick="openPage('chat', this)">Ø§Ù„Ø¯Ø±Ø¯Ø´Ø©</button>
      <button class="nav-btn" onclick="openPage('members', this)">Ø§Ù„Ø£Ø¹Ø¶Ø§Ø¡</button>
      <button class="nav-btn" onclick="openPage('settings', this)">Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</button>
      <button class="nav-btn" onclick="openPage('profile', this)">Ø§Ù„Ø¨Ø±ÙˆÙØ§ÙŠÙ„</button>
    </nav>


    <!-- Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ (Ø³ÙŠØªÙ… Ù…Ù„Ø¤Ù‡ Ø¨ÙˆØ§Ø³Ø·Ø© JavaScript) -->
    <main class="chat-content" id="content">
      <!-- Ù‡Ù†Ø§ Ø³ÙŠØªÙ… Ø¹Ø±Ø¶ Ø§Ù„ØµÙØ­Ø§Øª Ø§Ù„Ù…Ø®ØªÙ„ÙØ© (ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ØŒ Ø§Ù„Ø¯Ø±Ø¯Ø´Ø©ØŒ Ø¥Ù„Ø®) -->
    </main>


    <!-- Ø´Ø§Ø´Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„ -->
    <div id="loadingScreen">
      <div class="loading-spinner"></div>
    </div>
  </div>


  <script>
    // ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ© Ø¹Ù†Ø¯ Ø¨Ø¯Ø¡ Ø§Ù„ØªØ´ØºÙŠÙ„
    window.addEventListener("DOMContentLoaded", () => openPage("logout")); // ØªØ¨Ø¯Ø£ Ø§Ù„Ø¢Ù† Ø¨ØµÙØ­Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„


    let currentUser = {
      name: "Ø¹Ù„ÙŠ Ù…ØµØ·ÙÙ‰",
      gender: "male",
      avatar: "https://images.pexels.com/photos/2055230/pexels-photo-2055230.jpeg"
    };


    /**
     * ÙŠØ²ÙŠÙ„ Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ù†Ø´Ø·Ø© Ù…Ù† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø²Ø±Ø§Ø± ÙˆÙŠØ¶ÙŠÙÙ‡Ø§ Ø¥Ù„Ù‰ Ø§Ù„Ø²Ø± Ø§Ù„Ù…Ø­Ø¯Ø¯.
     * @param {HTMLElement} btn - Ø§Ù„Ø²Ø± Ø§Ù„Ø°ÙŠ ÙŠØ¬Ø¨ ØªÙØ¹ÙŠÙ„Ù‡.
     */
    function setActive(btn) {
      // Ø¥Ø²Ø§Ù„Ø© "active" Ù…Ù† ÙƒÙ„ Ø§Ù„Ø£Ø²Ø±Ø§Ø±
      document.querySelectorAll(".nav-btn").forEach(b => b.classList.remove("active"));
      // Ø¥Ø¶Ø§ÙØ© "active" Ø¥Ù„Ù‰ Ø§Ù„Ø²Ø± Ø§Ù„Ù…Ø­Ø¯Ø¯
      if (btn) btn.classList.add("active");
    }


    /**
     * ÙŠÙØªØ­ ØµÙØ­Ø© Ø¬Ø¯ÙŠØ¯Ø© ÙˆÙŠØ¹Ø±Ø¶ Ù…Ø­ØªÙˆØ§Ù‡Ø§.
     * @param {string} page - Ø§Ø³Ù… Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ù…Ø±Ø§Ø¯ ÙØªØ­Ù‡Ø§ (Ù…Ø«Ù„ 'chat' Ø£Ùˆ 'members').
     * @param {HTMLElement} btn - Ø§Ù„Ø²Ø± Ø§Ù„Ø°ÙŠ ØªÙ… Ø§Ù„Ù†Ù‚Ø± Ø¹Ù„ÙŠÙ‡.
     */
    function openPage(page, btn) {
      const content = document.getElementById("content");
      const header = document.getElementById("chatHeader");
      const nav = document.getElementById("chatNav");


      if (page === "logout") {
        // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ù‡ÙŠØ¯Ø± ÙˆØ´Ø±ÙŠØ· Ø§Ù„ØªÙ†Ù‚Ù„ Ø¹Ù†Ø¯ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬
        header.style.display = "none";
        nav.style.display = "none";
        showAuthPage('initial');
        return;
      } else {
        // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù‡ÙŠØ¯Ø± ÙˆØ´Ø±ÙŠØ· Ø§Ù„ØªÙ†Ù‚Ù„ ÙÙŠ Ø§Ù„ØµÙØ­Ø§Øª Ø§Ù„Ø£Ø®Ø±Ù‰
        header.style.display = "flex";
        nav.style.display = "flex";
      }


      setActive(btn);


      if (page === "chat") {
        content.innerHTML = `
          <section class="chat-page">
            <div class="messages" id="messages">
              <!-- Ø±Ø³Ø§Ø¦Ù„ ØªØ¬Ø±ÙŠØ¨ÙŠØ© -->
              <div class="bubble recv">Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ø´Ø§Øª Ø´Ù‡Ø§Ø¨ ğŸ‘‹</div>
            </div>


            <div class="chat-input">
              <div class="left-tools">
                <button class="icon-btn" id="photoBtn" title="Ø¥Ø±Ø³Ø§Ù„ ØµÙˆØ±Ø©">ğŸ“·</button>
                <button class="icon-btn" id="micBtn" title="ØªØ³Ø¬ÙŠÙ„ ØµÙˆØª">ğŸ¤</button>
              </div>


              <input class="msg-input" id="msgInput" type="text" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ..." />


              <button class="send-btn" id="sendBtn" title="Ø¥Ø±Ø³Ø§Ù„">â¤</button>
            </div>
          </section>
        `;


        // ØªÙ‡ÙŠØ¦Ø© ÙˆØ¸Ø§Ø¦Ù ØµÙØ­Ø© Ø§Ù„Ø¯Ø±Ø¯Ø´Ø©
        const messages = document.getElementById("messages");
        const msgInput = document.getElementById("msgInput");
        const sendBtn  = document.getElementById("sendBtn");


        function sendMessage() {
          const text = msgInput.value.trim();
          if (!text) return;
          const el = document.createElement("div");
          el.className = "bubble sent";
          el.textContent = text;
          messages.appendChild(el);
          msgInput.value = "";
          messages.scrollTop = messages.scrollHeight;
        }


        sendBtn.addEventListener("click", sendMessage);
        msgInput.addEventListener("keydown", e => {
          if (e.key === "Enter") sendMessage();
        });


        // Ø¥Ø¶Ø§ÙØ© ÙˆØ¸Ø§Ø¦Ù Ù…Ø¤Ù‚ØªØ© Ù„Ù„Ø£Ø²Ø±Ø§Ø± (Ø¨Ø¯ÙˆÙ† ÙˆØ¸ÙŠÙØ© ÙØ¹Ù„ÙŠØ©)
        document.getElementById("photoBtn").addEventListener("click", () => { console.log("Ø¥Ø±Ø³Ø§Ù„ ØµÙˆØ±Ø© (Ù„Ø§Ø­Ù‚Ø§Ù‹)"); });
        document.getElementById("micBtn").addEventListener("click",   () => { console.log("ØªØ³Ø¬ÙŠÙ„ ØµÙˆØª (Ù„Ø§Ø­Ù‚Ø§Ù‹)"); });


      } else if (page === "members") {
        // Ù‚Ø§Ø¦Ù…Ø© ØªØ¬Ø±ÙŠØ¨ÙŠØ© Ù„Ù„Ø£Ø¹Ø¶Ø§Ø¡
        const members = [
          { name: "Ø¹Ù„ÙŠ Ù…ØµØ·ÙÙ‰", id: "user123", avatar: "https://images.pexels.com/photos/1574681/pexels-photo-1574681.jpeg?auto=compress&cs=tinysrgb&dpr=2&w=500", online: true },
          { name: "ÙØ§Ø·Ù…Ø© Ø§Ù„Ø²Ù‡Ø±Ø§Ø¡", id: "user456", avatar: "https://images.pexels.com/photos/774909/pexels-photo-774909.jpeg?auto=compress&cs=tinysrgb&dpr=2&w=500", online: false },
          { name: "Ø£Ø­Ù…Ø¯ Ø­Ø§Ù…Ø¯", id: "user789", avatar: "https://images.pexels.com/photos/220453/pexels-photo-220453.jpeg?auto=compress&cs=tinysrgb&dpr=2&w=500", online: true },
          { name: "Ù„ÙŠÙ„Ù‰ Ù…Ø­Ù…ÙˆØ¯", id: "user012", avatar: "https://images.pexels.com/photos/415829/pexels-photo-415829.jpeg?auto=compress&cs=tinysrgb&dpr=2&w=500", online: true },
          { name: "Ù…Ø­Ù…Ø¯ Ø§Ù„Ø³ÙŠØ¯", id: "user345", avatar: "https://images.pexels.com/photos/936056/pexels-photo-936056.jpeg?auto=compress&cs=tinysrgb&dpr=2&w=500", online: false },
        ];


        // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ§Ù‹
        content.innerHTML = `
          <section class="members-page">
            <!-- Ø´Ø±ÙŠØ· Ø§Ù„Ø¨Ø­Ø« -->
            <div class="search-bar">
              <input id="searchInput" type="text" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ø£Ø¹Ø¶Ø§Ø¡..." />
              <button title="Ø¨Ø­Ø«">ğŸ”</button>
            </div>


            <!-- Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£Ø¹Ø¶Ø§Ø¡ -->
            <div class="members-list" id="membersList">
              ${members.map(member => `
                <div class="member-item-wrapper">
                  <div class="member-item">
                    <img class="member-avatar" src="${member.avatar}" alt="${member.name}" />
                    <div class="member-info">
                      <h3 class="member-name">${member.name}</h3>
                      <p class="member-id">${member.id}</p>
                    </div>
                    <div class="member-status ${member.online ? 'status-online' : 'status-offline'}"></div>
                  </div>
                </div>
              `).join('')}
            </div>
          </section>
        `;


        // ÙˆØ¸ÙŠÙØ© Ø§Ù„Ø¨Ø­Ø«
        const searchInput = document.getElementById("searchInput");
        searchInput.addEventListener("input", e => {
          const searchTerm = e.target.value.toLowerCase();
          document.querySelectorAll(".member-item-wrapper").forEach(el => {
            const name = el.querySelector(".member-name").textContent.toLowerCase();
            const id = el.querySelector(".member-id").textContent.toLowerCase();
            if (name.includes(searchTerm) || id.includes(searchTerm)) {
              el.style.display = "block";
            } else {
              el.style.display = "none";
            }
          });
        });


      } else if (page === "settings") {
        content.innerHTML = `
          <section class="settings-page">
            <!-- Ù‚Ø³Ù… Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª ÙˆØ§Ù„ÙˆØ¶Ø¹ -->
            <div class="settings-section">
              <h2 class="settings-section-title">Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª ÙˆØ§Ù„ÙˆØ¶Ø¹</h2>
              <div class="settings-option">
                <span class="label">ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª</span>
                <button class="settings-btn-themed" id="notificationsBtn">ğŸ”” ØªÙØ¹ÙŠÙ„</button>
              </div>
              <div class="settings-option">
                <span class="label">ÙˆØ¶Ø¹ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚</span>
                <button class="settings-btn-themed" id="themeBtn">â˜€ï¸ ÙØ§ØªØ­</button>
              </div>
            </div>


            <!-- Ù‚Ø³Ù… Ø§Ù„Ø®Ù„ÙÙŠØ§Øª -->
            <div class="settings-section">
              <h2 class="settings-section-title">Ø®Ù„ÙÙŠØ© Ø§Ù„Ø¯Ø±Ø¯Ø´Ø©</h2>
              <div class="settings-option">
                <span class="label">Ø¥Ø¶Ø§ÙØ© Ø®Ù„ÙÙŠØ© Ù…Ù† Ø§Ù„Ù‡Ø§ØªÙ</span>
                <input type="file" id="bgFile" accept="image/*" style="display:none;" />
                <label for="bgFile" class="settings-btn-themed" style="cursor:pointer;">ğŸï¸ Ø§Ø®ØªÙŠØ§Ø± Ù…Ù„Ù</label>
                <button class="settings-btn-themed" id="confirmBgFileBtn">âœ“ ØªØ£ÙƒÙŠØ¯</button>
              </div>
              <div class="settings-option">
                <span class="label">Ø¥Ø¶Ø§ÙØ© Ø®Ù„ÙÙŠØ© Ø¨Ø±Ø§Ø¨Ø·</span>
                <input type="text" id="bgUrlInput" class="settings-input-url" placeholder="Ø§Ù„ØµÙ‚ Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø© Ù‡Ù†Ø§..." />
                <button class="settings-btn-themed" id="confirmBgUrlBtn">âœ“ ØªØ£ÙƒÙŠØ¯</button>
              </div>
              <div class="settings-option">
                <span class="label">Ø¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø· Ø§Ù„Ø®Ù„ÙÙŠØ©</span>
                <button class="settings-btn-themed" id="resetBgBtn">ğŸ”„ Ø¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø·</button>
              </div>
            </div>


            <!-- Ù‚Ø³Ù… Ø§Ù„ØªÙ†Ø³ÙŠÙ‚Ø§Øª -->
            <div class="settings-section">
              <h2 class="settings-section-title">ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ ÙˆØ§Ù„ÙÙ‚Ø§Ø¹Ø§Øª</h2>
              <div class="settings-option">
                <span class="label">Ù„ÙˆÙ† Ø®Ø· Ø§Ù„Ø±Ø³Ø§Ø¦Ù„</span>
                <input type="color" id="fontColorInput" class="settings-input" value="#000000" />
              </div>
              <div class="settings-option">
                <span class="label">Ø­Ø¬Ù… Ø§Ù„Ø®Ø·</span>
                <div class="settings-range-container">
                  <input type="range" id="fontSizeRange" class="settings-range" min="10" max="20" value="14" />
                  <span id="fontSizeValue" class="settings-range-value">14</span>
                </div>
              </div>
              <div class="settings-option">
                <span class="label">Ù„ÙˆÙ† Ø®Ù„ÙÙŠØ© ÙÙ‚Ø§Ø¹Ø§ØªÙŠ</span>
                <input type="color" id="myBubbleBgInput" class="settings-input" value="#dcf8c6" />
              </div>
              <div class="settings-option">
                <span class="label">Ù„ÙˆÙ† Ø®Ù„ÙÙŠØ© ÙÙ‚Ø§Ø¹Ø§Øª Ø§Ù„Ø¢Ø®Ø±ÙŠÙ†</span>
                <input type="color" id="otherBubbleBgInput" class="settings-input" value="#ffffff" />
              </div>
              <div class="settings-option">
                <span class="label">Ø´ÙƒÙ„ Ø§Ù„ÙÙ‚Ø§Ø¹Ø§Øª</span>
                <button class="settings-btn-themed" id="bubbleShapeBtn">â­• Ù…Ø³ØªØ¯ÙŠØ±</button>
              </div>
              <div class="settings-option">
                <span class="label">Ø­Ø¬Ù… Ø§Ù„ÙÙ‚Ø§Ø¹Ø§Øª</span>
                <div class="settings-range-container">
                  <input type="range" id="bubbleSizeRange" class="settings-range" min="70" max="90" value="75" />
                  <span id="bubbleSizeValue" class="settings-range-value">75%</span>
                </div>
              </div>
              <button class="settings-btn-themed" id="confirmFormattingBtn">âœ“ ØªØ£ÙƒÙŠØ¯ Ø§Ù„ØªÙ†Ø³ÙŠÙ‚Ø§Øª</button>
            </div>


            <!-- Ù‚Ø³Ù… Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø¶Ø¨Ø· Ø§Ù„Ø¹Ø§Ù… -->
            <div class="settings-section">
              <h2 class="settings-section-title">Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø¶Ø¨Ø·</h2>
              <div class="settings-option">
                <span class="label">Ø¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø· Ø¬Ù…ÙŠØ¹ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª</span>
                <button class="settings-btn-themed" id="resetAllBtn">ğŸ—‘ï¸ Ø¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø·</button>
              </div>
            </div>
          </section>
        `;


        // ØªÙ‡ÙŠØ¦Ø© ÙˆØ¸Ø§Ø¦Ù ØµÙØ­Ø© Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª
        document.getElementById("notificationsBtn").addEventListener("click", () => console.log("ØªÙØ¹ÙŠÙ„/ØªØ¹Ø·ÙŠÙ„ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª"));
        document.getElementById("themeBtn").addEventListener("click", () => console.log("ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ÙˆØ¶Ø¹"));
        document.getElementById("bgFile").addEventListener("change", () => console.log("Ø§Ø®ØªÙŠØ§Ø± Ø®Ù„ÙÙŠØ© Ù…Ù† Ù…Ù„Ù"));
        document.getElementById("confirmBgFileBtn").addEventListener("click", () => console.log("ØªØ£ÙƒÙŠØ¯ Ø¥Ø¶Ø§ÙØ© Ø®Ù„ÙÙŠØ© Ù…Ù† Ø§Ù„Ù‡Ø§ØªÙ"));
        document.getElementById("bgUrlInput").addEventListener("change", () => console.log("Ø¥Ø¶Ø§ÙØ© Ø®Ù„ÙÙŠØ© Ù…Ù† Ø±Ø§Ø¨Ø·"));
        document.getElementById("confirmBgUrlBtn").addEventListener("click", () => console.log("ØªØ£ÙƒÙŠØ¯ Ø¥Ø¶Ø§ÙØ© Ø®Ù„ÙÙŠØ©..."));
        document.getElementById("resetBgBtn").addEventListener("click", () => console.log("Ø¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø· Ø§Ù„Ø®Ù„ÙÙŠØ©"));
        document.getElementById("confirmFormattingBtn").addEventListener("click", () => console.log("ØªØ£ÙƒÙŠØ¯ Ø§Ù„ØªÙ†Ø³ÙŠÙ‚Ø§Øª"));
        document.getElementById("resetAllBtn").addEventListener("click", () => console.log("Ø¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø· Ø§Ù„ÙƒÙ„"));


        // ÙˆØ¸ÙŠÙØ© ØªØ­Ø¯ÙŠØ« Ù‚ÙŠÙ…Ø© Ø§Ù„Ù†Ø·Ø§Ù‚
        function updateRangeValue(rangeId, valueId, suffix = '') {
          const range = document.getElementById(rangeId);
          const value = document.getElementById(valueId);
          if (range && value) {
            value.textContent = range.value + suffix;
            range.addEventListener("input", (e) => {
              value.textContent = e.target.value + suffix;
            });
          }
        }


        updateRangeValue("fontSizeRange", "fontSizeValue");
        updateRangeValue("bubbleSizeRange", "bubbleSizeValue", "%");


      } else if (page === "profile") {
        content.innerHTML = `
          <section class="profile-page">
            <div class="profile-section">
              <div class="profile-avatar-container">
                <img class="profile-avatar" id="profileAvatar" src="${currentUser.avatar}" alt="My Avatar" />
                <div class="profile-status status-online"></div>
              </div>
              <h2 class="profile-name" id="profileName">${currentUser.name}</h2>
              <p class="profile-status-text">Ù…ØªØµÙ„</p>
            </div>


            <div class="profile-section">
              <div class="profile-details-grid">
                <div class="profile-detail-card">
                  <p class="label">Ø§Ù„Ø¬Ù†Ø³</p>
                  <p class="value" id="profileGender">${currentUser.gender === 'male' ? 'Ø°ÙƒØ±' : 'Ø£Ù†Ø«Ù‰'}</p>
                </div>
                <div class="profile-detail-card">
                  <p class="label">Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</p>
                  <p class="value" id="profileUsername">Ø¹Ù„ÙŠ.Ù…</p>
                </div>
                <div class="profile-detail-card">
                  <p class="label">Ø§Ù„Ù…ÙˆÙ‚Ø¹</p>
                  <p class="value" id="profileLocation">Ø§Ù„Ù‚Ø§Ù‡Ø±Ø©ØŒ Ù…ØµØ±</p>
                </div>
                <div class="profile-detail-card">
                  <p class="label">ØªØ§Ø±ÙŠØ® Ø§Ù„ØªØ³Ø¬ÙŠÙ„</p>
                  <p class="value" id="profileJoinDate">2023-01-15</p>
                </div>
              </div>
              <button class="profile-edit-btn" onclick="showAuthPage('editProfile')">ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ</button>
            </div>
          </section>
        `;
      }
    }


    /**
     * ÙŠØ¹Ø±Ø¶ ØµÙØ­Ø§Øª Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø© (ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ØŒ Ø§Ù„ØªØ³Ø¬ÙŠÙ„ØŒ ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ)
     * @param {string} type - Ù†ÙˆØ¹ ØµÙØ­Ø© Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø© ('initial' or 'signup' or 'editProfile')
     */
    function showAuthPage(type) {
      const content = document.getElementById("content");
      if (type === 'initial') {
        content.innerHTML = `
          <section class="auth-page" id="initialAuthPage">
            <h1 class="auth-title">Ø´Ø§Øª Ø´Ù‡Ø§Ø¨</h1>
            <div class="auth-card">
              <div class="auth-input-group">
                <label for="loginName">Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</label>
                <input type="text" id="loginName" class="auth-input" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…" />
              </div>
              <div class="auth-input-group">
                <label for="loginPassword">ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</label>
                <input type="password" id="loginPassword" class="auth-input" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±" />
              </div>
              <button class="form-btn-confirm" onclick="openPage('chat', document.querySelector('.nav-btn'))">Ø¯Ø®ÙˆÙ„</button>
              <p class="form-text">Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ Ø­Ø³Ø§Ø¨ØŸ <span class="form-text-link" onclick="showAuthPage('signup')">ØªØ³Ø¬ÙŠÙ„ Ø¬Ø¯ÙŠØ¯</span></p>
            </div>
          </section>
        `;
      } else if (type === 'signup') {
        content.innerHTML = `
          <section class="auth-page" id="signupPage">
            <h1 class="auth-title">ØªØ³Ø¬ÙŠÙ„ Ø¬Ø¯ÙŠØ¯</h1>
            <div class="auth-card">
              <div class="profile-avatar-upload">
                <div class="signup-avatar-container">
                  <img class="signup-avatar" id="signupAvatar" src="https://images.pexels.com/photos/2055230/pexels-photo-2055230.jpeg" alt="Avatar" />
                </div>
                <div class="signup-avatar-actions">
                  <button class="signup-avatar-btn" id="signupRandomAvatarBtn">ØµÙˆØ±Ø© Ø¹Ø´ÙˆØ§Ø¦ÙŠØ©</button>
                  <label class="signup-avatar-btn" for="signupFile">Ø§Ø®ØªÙŠØ§Ø± Ù…Ù† Ø§Ù„Ù‡Ø§ØªÙ</label>
                  <input type="file" id="signupFile" accept="image/*" style="display:none;" />
                </div>
              </div>
              <div class="auth-input-group">
                <label for="signupName">Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</label>
                <input type="text" id="signupName" class="auth-input" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…" />
              </div>
              <div class="auth-input-group">
                <label for="signupPassword">ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</label>
                <input type="password" id="signupPassword" class="auth-input" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±" />
              </div>
              <div class="gender-select">
                <div class="gender-option selected" data-gender="male" id="genderMale">Ø°ÙƒÙ€Ø±</div>
                <div class="gender-option" data-gender="female" id="genderFemale">Ø£Ù†Ø«Ù€Ù‰</div>
              </div>
              <div class="form-btn-group">
                <button class="form-btn-confirm" onclick="openPage('chat', document.querySelector('.nav-btn'))">Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨</button>
                <button class="form-btn-cancel" onclick="showAuthPage('initial')">Ø¥Ù„ØºØ§Ø¡</button>
              </div>
            </div>
          </section>
        `;
        setupSignupListeners();
      } else if (type === 'editProfile') {
        content.innerHTML = `
          <section class="auth-page" id="editProfilePage">
            <h1 class="auth-title">ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ</h1>
            <div class="auth-card">
              <div class="profile-avatar-upload">
                <div class="signup-avatar-container">
                  <img class="signup-avatar" id="editAvatar" src="${currentUser.avatar}" alt="Avatar" />
                </div>
                <div class="signup-avatar-actions">
                  <button class="signup-avatar-btn" id="editRandomAvatarBtn">ØµÙˆØ±Ø© Ø¹Ø´ÙˆØ§Ø¦ÙŠØ©</button>
                  <label class="signup-avatar-btn" for="editFile">Ø§Ø®ØªÙŠØ§Ø± Ù…Ù† Ø§Ù„Ù‡Ø§ØªÙ</label>
                  <input type="file" id="editFile" accept="image/*" style="display:none;" />
                </div>
              </div>
              <div class="auth-input-group">
                <label for="editName">Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</label>
                <input type="text" id="editName" class="auth-input" value="${currentUser.name}" />
              </div>
              <div class="auth-input-group">
                <label for="editPassword">ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©</label>
                <input type="password" id="editPassword" class="auth-input" placeholder="Ø§ÙƒØªØ¨ ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ø¬Ø¯ÙŠØ¯Ø©" />
              </div>
              <div class="gender-select">
                <div class="gender-option ${currentUser.gender === 'male' ? 'selected' : ''}" data-gender="male" id="editGenderMale">Ø°ÙƒÙ€Ø±</div>
                <div class="gender-option ${currentUser.gender === 'female' ? 'selected' : ''}" data-gender="female" id="editGenderFemale">Ø£Ù†Ø«Ù€Ù‰</div>
              </div>
              <div class="form-btn-group">
                <button class="form-btn-confirm" onclick="saveProfileChanges()">Ø­ÙØ¸ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª</button>
                <button class="form-btn-cancel" onclick="openPage('profile')">Ø¥Ù„ØºØ§Ø¡</button>
              </div>
            </div>
          </section>
        `;
        setupEditProfileListeners();
      }
    }


    /**
     * Ø¥Ø¹Ø¯Ø§Ø¯ Ù…Ø³ØªÙ…Ø¹ÙŠ Ø§Ù„Ø£Ø­Ø¯Ø§Ø« Ù„ØµÙØ­Ø© Ø§Ù„ØªØ³Ø¬ÙŠÙ„.
     */
    function setupSignupListeners() {
        const genderOptions = document.querySelectorAll('.gender-option');
        genderOptions.forEach(option => {
            option.addEventListener('click', () => {
                genderOptions.forEach(opt => opt.classList.remove('selected'));
                option.classList.add('selected');
            });
        });


        const signupRandomAvatarBtn = document.getElementById("signupRandomAvatarBtn");
        const signupFile = document.getElementById("signupFile");
        let selectedGender = 'male';


        genderOptions.forEach(option => {
            option.addEventListener('click', () => {
                selectedGender = option.dataset.gender;
            });
        });


        signupRandomAvatarBtn.addEventListener("click", () => {
            const maleAvatars = [
              "https://images.pexels.com/photos/2055230/pexels-photo-2055230.jpeg",
              "https://images.pexels.com/photos/1574681/pexels-photo-1574681.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",
              "https://images.pexels.com/photos/220453/pexels-photo-220453.jpeg?auto=compress&cs=tinysrgb&dpr=2&w=500"
            ];
            const femaleAvatars = [
              "https://images.pexels.com/photos/774909/pexels-photo-774909.jpeg?auto=compress&cs=tinysrgb&dpr=2&w=500",
              "https://images.pexels.com/photos/415829/pexels-photo-415829.jpeg?auto=compress&cs=tinysrgb&dpr=2&w=500"
            ];
            const avatars = selectedGender === 'male' ? maleAvatars : femaleAvatars;
            const newAvatar = avatars[Math.floor(Math.random() * avatars.length)];
            document.getElementById("signupAvatar").src = newAvatar;
            console.log("ØªÙ… ØªØ¹ÙŠÙŠÙ† ØµÙˆØ±Ø© Ø¹Ø´ÙˆØ§Ø¦ÙŠØ©.");
        });

        document.getElementById("signupFile").addEventListener("change", (e) => {
            const file = e.target.files[0];
            if (file) {
              const reader = new FileReader();
              reader.onload = (event) => {
                document.getElementById("signupAvatar").src = event.target.result;
              };
              reader.readAsDataURL(file);
            }
        });
    }


    /**
     * Ø¥Ø¹Ø¯Ø§Ø¯ Ù…Ø³ØªÙ…Ø¹ÙŠ Ø§Ù„Ø£Ø­Ø¯Ø§Ø« Ù„ØµÙØ­Ø© ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ.
     */
    function setupEditProfileListeners() {
      const genderOptions = document.querySelectorAll('.gender-option');
      genderOptions.forEach(option => {
          option.addEventListener('click', () => {
              genderOptions.forEach(opt => opt.classList.remove('selected'));
              option.classList.add('selected');
              currentUser.gender = option.dataset.gender;
          });
      });


      const editRandomAvatarBtn = document.getElementById("editRandomAvatarBtn");
      editRandomAvatarBtn.addEventListener("click", () => {
          const maleAvatars = [
            "https://images.pexels.com/photos/2055230/pexels-photo-2055230.jpeg",
            "https://images.pexels.com/photos/1574681/pexels-photo-1574681.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",
            "https://images.pexels.com/photos/220453/pexels-photo-220453.jpeg?auto=compress&cs=tinysrgb&dpr=2&w=500"
          ];
          const femaleAvatars = [
            "https://images.pexels.com/photos/774909/pexels-photo-774909.jpeg?auto=compress&cs=tinysrgb&dpr=2&w=500",
            "https://images.pexels.com/photos/415829/pexels-photo-415829.jpeg?auto=compress&cs=tinysrgb&dpr=2&w=500"
          ];
          const avatars = currentUser.gender === 'male' ? maleAvatars : femaleAvatars;
          const newAvatar = avatars[Math.floor(Math.random() * avatars.length)];
          document.getElementById("editAvatar").src = newAvatar;
          currentUser.avatar = newAvatar;
      });


      document.getElementById("editFile").addEventListener("change", (e) => {
          const file = e.target.files[0];
          if (file) {
              const reader = new FileReader();
              reader.onload = (event) => {
                  document.getElementById("editAvatar").src = event.target.result;
                  currentUser.avatar = event.target.result;
              };
              reader.readAsDataURL(file);
          }
      });
    }


    function saveProfileChanges() {
        // ØªØ­Ø¯ÙŠØ« Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
        const newName = document.getElementById("editName").value;
        if (newName) {
            currentUser.name = newName;
            document.getElementById("profileName").textContent = newName;
        }


        // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¬Ù†Ø³
        document.getElementById("profileGender").textContent = currentUser.gender === 'male' ? 'Ø°ÙƒØ±' : 'Ø£Ù†Ø«Ù‰';


        // ØªØ­Ø¯ÙŠØ« Ø§Ù„ØµÙˆØ±Ø© ÙÙŠ Ø§Ù„Ù‡ÙŠØ¯Ø± ÙˆØ§Ù„Ø¨Ø±ÙˆÙØ§ÙŠÙ„
        document.querySelector(".chat-header .avatar").src = currentUser.avatar;
        document.getElementById("profileAvatar").src = currentUser.avatar;


        // Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„ØµÙØ­Ø© Ø§Ù„Ø¨Ø±ÙˆÙØ§ÙŠÙ„
        openPage('profile', document.querySelector('[onclick="openPage(\'profile\', this)"]'));


        console.log("ØªÙ… Ø­ÙØ¸ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª:", currentUser);
    }

  </script>
</body>
</html>


